@model QueryForm

@{
    ViewData["Title"] = "QueryDetails";
}

<style>
    .expert-message {
        /* border: 1px solid grey; */
        /* height: 50px; */
        font-weight: 600;
        width: 50%;
        padding: 10px 10px;
        background-color: #f2f2f2;
        color: green;
        margin: 5px 0px;
        
        border-radius: 10px;
    }

    .seller-message {
        /* height: 50px; */
        font-weight: 600;
        width: 50%;
        padding: 10px 10px;
        margin: 5px 0px;
        background-color: rgb(110, 148, 212);
        color: white;
        border-radius: 10px;
        justify-content: end;
        margin-left: auto;
    }   
</style>

<link rel="stylesheet" href="~/css/queryDetails.css">

<div class="container-fluid">
    <div class="row mt-4">
        <!-- left side query section -->
        <div class="col-md-4 left-side">
            <div class="title purple-background d-flex justify-content-center align-items-center">
                <h5 class="text-center mt-1">QUERY</h5>
            </div>
            <hr class="text-white">

            <div class="d-flex query-image gap-4 small_grey_text_css">
                <img src="~/@Model.ImageUrl" alt="" height="150" width="200">
                <p class="card-title">@Model.DateCreated</p>
            </div>


            <div class="card card-box mt-2">
                <div class="card-body d-flex">
                    <div>
                        <div class="gap-2">
                            <p class="card-title">@Model.Id</p>
                            <p class="card-title">@Model.User.FirstName</p>
                            <p class="card-title">@Model.Title</p>
                            <p class="card-title">@Model.ProblemCategory</p>
                            <p class="card-title">@Model.Location</p>
                            <p class="card-title">Urgency Level: @Model.UrgencyLevel</p>
                        </div>
                        <p class="card-title">@Model.Description</p>
                    </div>
                </div>
            </div>

        </div>

        <!-- right side query section -->
        <div class="col-md-8 right-side">
            <div class="title purple-background  d-flex justify-content-center align-items-center">
                <h5 class="text-center mt-1">MESSAGES</h5>
            </div>
            <hr class="text-white">

            <div class="messages-container mt-4">
                <!-- Expert's comment -->
                @if (Model.QueryComments != null && Model.QueryComments.Any())
                {                  
                    @foreach (var comment in Model.QueryComments)
                    {
                        <!-- Expert's reply -->
                        @if (comment.IsExpert)
                        {
                        <section class="expert-message">
                            <p>@comment.CommentText</p>
                            </section>
                        }
                        else
                        {
                            <section class="seller-message">
                                <p>@comment.CommentText</p>
                            </section>
                        }

                }
@* 
                        <section class="seller-message mb-5">
                            <p>hi</p>
                        </section> *@
                }
                else
                {
                    <p>No comments available.</p>
                }
            </div>

            <!-- Message form -->
            <div class="message-form">
                <form method="post" class="d-flex gap-4 mt-4" asp-action="QueryDetails" asp-controller="Consultation">
                    <input type="hidden" name="queryFormId" value="@Model.Id">
                    <input type="text" id="commentText" name="commentText" class="form-control" placeholder="Type your message..." data-ajax="true" data-ajax-complete="count">
                    <button class="btn purple-background white-text">Submit</button>
                </form>
            </div>



        </div>

    </div>
</div>
<script>

    deletepage = function () {
        location.reload();
    }

    count = function () {
        location.reload();
    }

</script>
@* 
<div class="comment card bg-light mb-3">
    <div class="card-body">
        <!-- Expert's reply -->
        <div class="reply card bg-light mb-3">
            <div class="card-body" style="background-color:dodgerblue">
                <p class="card-text text-white">@comment.CommentText</p>
            </div>
        </div>
        <!-- Seller's reply -->
        <div class="reply card bg-light mb-3">
            <div class="card-body">
                <p class="card-text">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
            </div>
        </div>
    </div>
</div> *@


